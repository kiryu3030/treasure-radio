<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/treasure-radio/app/static/images/favicon.ico" type="image/x-icon">
  <title>維修控制台</title>
  <script src="/treasure-radio/app/static/jquery/jquery-3.6.4.min.js"></script>
  <script src="/treasure-radio/app/static/socket-io-4.7.4/socket.io.js"></script>
  <script src="/treasure-radio/app/static/js/layout.js"></script>
  <script src="/treasure-radio/app/static/js/jquery.fittext.js"></script>
  <link rel="stylesheet" type="text/css" href="/treasure-radio/app/static/bootstrap-5.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/treasure-radio/app/static/bootstrap-icons-1.11.3/font/bootstrap-icons.min.css">
  <!-- <link rel="stylesheet" type="text/css" href="/treasure-radio/app/static/bootstrap-slider-11.0.2/css/bootstrap-slider.min.css"> -->
  <link rel="stylesheet" type="text/css" href="/treasure-radio/app/static/css/layout.css">
  <link rel="stylesheet" type="text/css" href="/treasure-radio/app/static/css/treasure.css">
  <style>
  @font-face {
    font-family: Cubic_11;
    src: url(../treasure-radio/app/static/fonts/Cubic_11.ttf);
  }
  body {
    font-family: 'Cubic_11', sans-serif;
    font-style: normal;
    background-color: black;
  }
  </style>
</head>
<body style="overflow-x: hidden;overflow-y: hidden;">
<!--Main Navigation-->
<div id="main-container" style="position: relative;overflow-x: hidden;overflow-y: hidden;--main-theme-color: #19FA9C;">
  <div id="layer-bottom" style="position: absolute;z-index: 2;overflow-x: hidden;overflow-y: hidden;">
    <div id="content-bottom" style="position: relative;overflow-x: hidden;overflow-y: hidden;z-index: 2;color: white;">
      <div id="top-page" class="py-4 px-3">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div style="width: 100%; height: 100px; color: var(--main-theme-color);">
                <div class="d-flex justify-content-between">
                  <div style="font-size: 34px;">這不只是你的鳴唱 ＞ ＞ ＞ </div>
                  <div class="card" style="--bs-border-radius: 0px; --bs-border-color-translucent: var(--main-theme-color);">
                    <div class="card-header text-center" style="--bs-card-cap-padding-y:0.15rem; background-color: var(--main-theme-color);font-size: 14px;">
                      NOW LISTENING
                    </div>
                    <div class="card-body" style="background-color: rgb(0, 0, 0);color: var(--main-theme-color);">
                      <div class="d-flex flex-column">
                        <div class="text-start" style="font-size: 14px;">目前節目 ▶ <span>新聞快訊</span></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-4" style="color: var(--main-theme-color);">
            <div class="col-5">
              <div class="card" style="--bs-border-radius: 0px; --bs-border-color-translucent: var(--main-theme-color);">
                <div class="card-header text-center" style="--bs-card-cap-padding-y:0.15rem; background-color: var(--main-theme-color);font-size: 20px;">
                  IMFORMATION2
                </div>
                <div class="card-body" style="background-color: rgb(0, 0, 0);color: var(--main-theme-color);">
                  <div class="d-flex flex-column">
                    <div class="text-center" style="font-size: 100px;margin-bottom: -15px;margin-top: -10px;">12:10</div>
                    <div class="text-center" style="font-size: 29px;">2025/08/08 THU</div>
                    <div class="text-start pt-3" style="font-size: 19px;">LOC:</div>
                    <div class="text-start" style="font-size: 17px;">Treasure Hill Artist Village</div>
                    <div class="text-start" style="font-size: 17px;height: 85px;"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-7">
              <div class="d-flex flex-column">
                <div class="text-center pt-2" style="font-size: 65px;">Make a wish!</div>
                <div>
                  <div class="card mt-3" style="--bs-border-radius: 0px; --bs-border-color-translucent: var(--main-theme-color);">
                    <div class="card-header text-center" style="--bs-card-cap-padding-y:0.15rem; background-color: var(--main-theme-color);font-size: 20px;">
                      NOW LISTENING
                    </div>
                    <div class="card-body" style="background-color: rgb(0, 0, 0);color: var(--main-theme-color);">
                      <div class="d-flex flex-column">
                        <div class="text-start" style="font-size: 22px;">目前節目 ▶ <span>新聞快訊</span></div>
                        <div class="marquee-container mt-3">
                          <div class="marquee-content">
                            您現在收聽的是《鳴唱電台》，一切美好都會實現 今天天氣預報
                          </div>
                        </div>
                        <!-- <div class="text-start mt-2" style="font-size: 13px;">您現在收聽的是《鳴唱電台》，一切美好都會實現 今天天氣預報</div> -->
                        <div class="mt-3" style="font-size: 12px;">■ ■ ■ ■ ■ ■</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="text-center mt-3 py-2" style="font-size: 24px;border-style: solid;border-width: 1.6px;border-color: var(--main-theme-color);background-color: var(--main-theme-color);color: black;">＞ 按任一鍵開始互動</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div id="setting-container" class="mostly-customized-scrollbar" style="overflow-x: hidden;overflow-y: scroll;position: relative;scroll-behavior: smooth;">
        <div class="top-bar-val setting-layout p-3">
          <div style="width: 100%;">
            <div class="container-fluid">
              <div class="row"></div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
  <div id="layer-mid" style="position: absolute;z-index: 2;overflow-x: hidden;overflow-y: hidden;" hidden>
    <div id="content-mid" style="position: relative;overflow-x: hidden;overflow-y: hidden;z-index: 2;color: white;">
      <div id="top-page" class="py-4 px-3">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div style="width: 100%; height: 100px; background-color: var(--main-theme-color);"></div>
            </div>
          </div>
          <div class="row mt-4" style="color: var(--main-theme-color);">
            <div class="col-5">
              <div class="card" style="--bs-border-radius: 0px; --bs-border-color-translucent: var(--main-theme-color);">
                <div class="card-header text-center" style="--bs-card-cap-padding-y:0.15rem; background-color: var(--main-theme-color);font-size: 20px;">
                  IMFORMATION
                </div>
                <div class="card-body" style="background-color: rgb(0, 0, 0);color: var(--main-theme-color);">
                  <div class="d-flex flex-column">
                    <div class="text-center" style="font-size: 100px;margin-bottom: -15px;margin-top: -10px;">12:10</div>
                    <div class="text-center" style="font-size: 29px;">2025/08/08 THU</div>
                    <div class="text-start pt-3" style="font-size: 19px;">LOC:</div>
                    <div class="text-start" style="font-size: 17px;">Treasure Hill Artist Village</div>
                    <div class="text-start" style="font-size: 17px;height: 85px;"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-7">
              <div class="d-flex flex-column">
                <div class="text-center pt-2" style="font-size: 65px;">Make a wish!</div>
                <div>
                  <div class="card mt-3" style="--bs-border-radius: 0px; --bs-border-color-translucent: var(--main-theme-color);">
                    <div class="card-header text-center" style="--bs-card-cap-padding-y:0.15rem; background-color: var(--main-theme-color);font-size: 20px;">
                      NOW LISTENING
                    </div>
                    <div class="card-body" style="background-color: rgb(0, 0, 0);color: var(--main-theme-color);">
                      <div class="d-flex flex-column">
                        <div class="text-start" style="font-size: 22px;">目前節目 ▶ <span>新聞快訊</span></div>
                        <div class="marquee-container mt-3">
                          <div class="marquee-content">
                            您現在收聽的是《鳴唱電台》，一切美好都會實現 今天天氣預報
                          </div>
                        </div>
                        <!-- <div class="text-start mt-2" style="font-size: 13px;">您現在收聽的是《鳴唱電台》，一切美好都會實現 今天天氣預報</div> -->
                        <div class="mt-3" style="font-size: 12px;">■ ■ ■ ■ ■ ■</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="text-center mt-3 py-2" style="font-size: 24px;border-style: solid;border-width: 1.6px;border-color: var(--main-theme-color);background-color: var(--main-theme-color);color: black;">＞ 按任一鍵開始互動</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div id="setting-container" class="mostly-customized-scrollbar" style="overflow-x: hidden;overflow-y: scroll;position: relative;scroll-behavior: smooth;">
        <div class="top-bar-val setting-layout p-3">
          <div style="width: 100%;">
            <div class="container-fluid">
              <div class="row"></div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
  
  <div class="modal fade" id="shutdown-modal" tabindex="-1" aria-labelledby="shutdown-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered text-dark">
      <div class="modal-content">
        <div id="shutdown-form" class="modal-body">
          <div class="row" style="height: 200px;">
            <div class="col-12 align-self-center">
              <div class="row flex-column align-items-center">
                <div id="conferm-title" class="col-8 text-center" style="font-size: 24px;">是否執行</div>
                <div class="col-10 text-center" style="margin-top: 40px;">
                  <button type="button" class="btn btn-dark mx-3" data-bs-dismiss="modal" aria-label="Close">否</button>
                  <button id="shutdown" type="button" class="btn btn-dark mx-3">是</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- load Modal -->
  <div class="modal fade" id="load-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="load-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row flex-column">
              <div class="col pt-2"><div class="loading"></div></div>
              <div class="col">
                <p id="load-modal-title" class="text-center" style="font-size: 20px;margin-top: 15px;">等待裝置回應</p>
              </div>
              <div class="col">
                <p id="load-timer" class="text-center" style="font-size: 12px;"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- alert Modal -->
  <div class="modal fade" id="alert-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="alert-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm text-dark">
      <div class="modal-content">
        <!-- <div class="modal-header">
          
        </div> -->
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col-sm-12">
              <div id="alert-title" class="text-center">錯誤</div>
              <hr>
              <div id="alert-msg"></div>
            </div>
          </div>
          <div class="d-flex justify-content-center pt-2">
            <!-- <button type="button" class="config-button mx-3" data-bs-dismiss="modal" aria-label="Close">否</button> -->
            <button id="alert-close" type="button" class="btn btn-dark" data-bs-dismiss="modal" aria-label="Close">確定</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  
</div>
<script src="/treasure-radio/app/static/bootstrap-5.3.2/js/bootstrap.bundle.min.js"></script>
<!-- <script src="/treasure-radio/app/static/bootstrap-slider-11.0.2/js/bootstrap-slider.js"></script> -->
<script>
var alertModal = bootstrap.Modal.getOrCreateInstance(document.querySelector('#alert-modal'));
var shutdownModal = bootstrap.Modal.getOrCreateInstance(document.querySelector('#shutdown-modal'));
var loadModal = bootstrap.Modal.getOrCreateInstance(document.querySelector('#load-modal'));

var ctrlPowerCalback = {};

function showAlert(data) {
  $("#alert-msg").html(data['msg']);
  alertModal.show();
}
function showLoading(data) {
  $("#load-modal-title").html(data);
  loadModal.show();
}
</script>
<script>
$(document).on("keydown", function(event) {
  // $("#output").text("你按下了：「" + event.key + "」");
  // $("#layer-mid").hide();
  // $('#main-container').css('--main-theme-color', 'rgb(249,254,255)')
  
  $('#layer-mid').stop().animate(
    { top: `-1000px` }, 
    {
      duration: 2000,
      complete: ()=>{
        $("#layer-mid").hide();
      }
    }
  );
});
</script>
<script>
$("#shutdown").click(function() {
  ctrlPower(ctrlPowerCalback.id, ctrlPowerCalback.cmdName);
});
function ctrlPower(id, cmdName){
  shutdownModal.hide();
  if(id=="8" || id=="9"){
    if($("#base-id").val()<1 || $("#base-id").val()>140){
      $("#base-id").addClass("is-invalid");
      return;
    }
    $("#base-id").removeClass("is-invalid");
    showLoading(cmdName);
    $.ajax({
      type: "GET",
      url: `/api/power/${id}?base=${$("#base-id").val()}`,
      dataType: "json",
      contentType: "application/json",
    })
    .done(function(data) {
      console.log(data);
    })
    .always(function() {
      loadModal.hide();
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
      showAlert(jqXHR.responseJSON);
    });
  }
  else if(id=="10"){
    if($("#base-id").val()<1 || $("#base-id").val()>140){
      $("#base-id").addClass("is-invalid");
      return;
    }
    $("#base-id").removeClass("is-invalid");
    showLoading(cmdName);
    $.ajax({
      type: "GET",
      url: `/api/stepper/adjustment/power/${$("#base-id").val()}`,
      dataType: "json",
      contentType: "application/json",
    })
    .done(function(data) {
      console.log(data);
    })
    .always(function() {
      loadModal.hide();
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
      showAlert(jqXHR.responseJSON);
    });
  }
  else{
    showLoading(cmdName);
    $.ajax({
      type: "GET",
      url: `/api/power/${id}`,
      dataType: "json",
      contentType: "application/json",
    })
    .done(function(data) {
      console.log(data);
    })
    .always(function() {
      loadModal.hide();
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
      showAlert(jqXHR.responseJSON);
    });
  }
}
$("#power .btn").click(function() {
  let id = $(this).data("power");
  let cmdName = $(this).attr('aria-label');
  console.log(id);
  console.log(cmdName);
  // ctrlPower(id, cmdName);
  ctrlPowerCalback["id"] = id;
  ctrlPowerCalback["cmdName"] = cmdName;
  $("#conferm-title").html(`是否執行${cmdName}`);
  shutdownModal.show();
});
function ctrlLed(id, cmdName){
  showLoading(cmdName);
  $.ajax({
    type: "GET",
    url: `/api/led/${id}`,
    dataType: "json",
    contentType: "application/json",
  })
  .done(function(data) {
    console.log(data);
  })
  .always(function() {
    loadModal.hide();
  })
  .fail(function(jqXHR, textStatus, errorThrown) {
    showAlert(jqXHR.responseJSON);
  });
}
$("#led .btn").click(function() {
  let id = $(this).data("led");
  let cmdName = $(this).attr('aria-label');
  console.log(id);
  console.log(cmdName);
  ctrlLed(id, cmdName);
});
// CH
function ctrlpowerCH(id, ch, mode, cmdName){
  showLoading(cmdName);
  $.ajax({
    type: "GET",
    url: `/api/power/ch/${id}?ch=${ch}&mode=${mode}`,
    dataType: "json",
    contentType: "application/json",
  })
  .done(function(data) {
    console.log(data);
  })
  .always(function() {
    loadModal.hide();
  })
  .fail(function(jqXHR, textStatus, errorThrown) {
    showAlert(jqXHR.responseJSON);
  });
}
$(".pwoer-ch-list .btn").click(function() {
  let mode = $(this).data('mode');
  let ch = $(this).parent().parent().data('ch');
  let id = $(this).parent().parent().parent().data('id');
  let cmdName = $(this).attr('aria-label');
  // console.log(mode);
  // console.log(ch);
  // console.log(id);
  ctrlpowerCH(id, ch, mode, cmdName);
});
</script>
<script>
$(window).resize(function() {
  SetupWindow();
});

$(window).ready(function() {
  SetupWindow();
});
// $("#setting-container").on("scroll",()=>{
//   if($("#scroll-point").offset().top<-18) $(".head-top").css('opacity', 1);
//   else $(".head-top").css('opacity', 0);
// });
</script>
</body>
</html>